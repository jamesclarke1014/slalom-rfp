<html>
    <head>
        <title>jQuery post form data using .post() method by codeofaninja.com</title>
        
    </head>
    <body>
        
        <h1>jQuery post form data using .post() method</h1>
        <div>Fill out and submit the form below to get response.</div>
        
        <!-- our form -->
        <form id='userForm'>
            <div class="form-group">
                <select class="form-control input-lg" id="Topic" name="Topic" required="required">
                  <option selected="selected" disabled="disabled">Topic</option>
                  <option value="Practice Experience">Practice Experience</option>
                  <option value="Staffing">Staffing</option>
                  <option value="Project Management">Project Management</option>
                  <option value="Working Together">Working Together</option>
                  <option value="Delivery Process">Delivery Process</option>
                  <option value="Terms and Conditions">Terms and Conditions</option>
                  <option value="Slalom Profile">Slalom Profile</option>
                  <option value="Executive Summary">Executive Summary</option>
                  <option value="Training">Training</option>
                </select>
              </div>
              <div class="form-group">
                <select class="form-control input-lg" id="Product" name="Product" required="required">
                  <option selected="selected" disabled="disabled">Product</option>
                  <option value="None">None</option>
                  <option value="Sitecore">Sitecore</option>
                  <option value="Salesforce">Salesforce</option>
                  <option value="Dynamics">Dynamic</option>
                  <option value="General">General</option>
                </select>
              </div>
            <div><input type='submit' value='Submit' /></div>
        </form>
        
        <!-- where the response will be displayed -->
        <div id='response'></div>
        <!-- table for response -->
        <table id="personDataTable">
            <tr>
                <th>Question</th>
                <th>Answer</th>
            </tr>
            
        </table>
        
        <script src="jquery-1.11.3.js"></script>
        <script>
        $(document).ready(function(){
        $('#userForm').submit(function(){
        

        
        /*
        * 'post_receiver.php' - where you will pass the form data
        * $(this).serialize() - to easily read form data
        * function(data){... - data contains the response from post_receiver.php
        */
        $.post('test-search.php', $(this).serialize(), function(data){
        
            // show the response

            console.log(data);
            var dataArray = JSON.parse(data);
            console.log(dataArray[0]['question']);
            drawTable(dataArray);
        
        }).fail(function() {
        
        // just in case posting your form failed
        alert( "Posting failed." );
        
        });
        
        //building table 
        function drawTable(dataArray) {
            for (var i = 0; i < dataArray.length; i++) {
                drawRow(dataArray[i]);
            }
        }

        function drawRow(rowData) {
            var row = $("<tr />")
            $("#personDataTable").append(row); //this will append tr element to table... keep its reference for a while since we will add cels into it
            row.append($("<td>" + rowData.question + "</td>"));
            row.append($("<td>" + rowData.answer + "</td>"));
        }
            
            // to prevent refreshing the whole page page
            return false;
            
            });
            });
            </script>
            
        </body>
    </html>